<!DOCTYPE html>
<html>
<head>
    <title>earth-demo</title>
    <style>
        html{
            overflow:hidden;
        }
        #canvas-frame {
            position:absolute;
            width: 100vw;
            height: 100vh;
        }
    </style>
</head>
<body>
    <div id="canvas-frame"></div>
    
    <script src="./static/js/support/three.js" ></script>
    <script src="./static/js/support/OrbitControls.js" ></script>
    
    <script type="text/javascript">
        //渲染区域 
        var threeDiv = document.getElementById( 'canvas-frame' );
        var width = threeDiv.clientWidth;
        var height = threeDiv.clientHeight;

        //渲染器
        var renderer = new THREE.WebGLRenderer( {antialias: true, alpha: true} );
        renderer.setClearColor( 0xffffff, 0 );
        renderer.setSize(width, height);
        threeDiv.appendChild(renderer.domElement);//在Div里生成一个canvas

        //场景
        var scene = new THREE.Scene();

        //相机
        var camera = new THREE.PerspectiveCamera(45, width / height, 0.1, 10000);
        camera.position.set(0, 100, 300);
        scene.add(camera);

        //光源
        var light = new THREE.DirectionalLight(0xffffff, 1.0, 0);//平行光
        light.position.set(-100, 500, 200);
        scene.add(light);

        var aLight = new THREE.AmbientLight( 0xaaaaaa );//环境光
        scene.add( aLight );

        //控制器
        var orbitControls = new THREE.OrbitControls(camera, threeDiv);
        orbitControls.autoRotate = true;//自动旋转

        
        initObject();
        render();//启动渲染
	    
        
        function render()
        {
            orbitControls.update();
            renderer.render(scene, camera);
            requestAnimationFrame(render);
        }

        function initObject(){
            var geometry = new THREE.SphereGeometry( 100, 32, 32 );

            var material = new THREE.MeshPhongMaterial({
                map:         getTexture('static/texture/earth/2_no_clouds_4k.jpg'),
                bumpMap:     getTexture('static/texture/earth/elev_bump_4k.jpg'),//凹凸贴图
                bumpScale:   1,//凹凸贴图会对材质产生多大影响。典型范围是0-1。默认值为1。
                emissive:    new THREE.Color(0x6d3939),
                emissiveIntensity: 0.05,
                //wireframe:true,
                transparent: true,
                alphaMap:    getTexture('static/texture/earth/grey.jpg'),//透明度贴图，黑色：完全透明;白色：完全不透明
            });

            var mesh = new THREE.Mesh( geometry, material );
            scene.add(mesh);
        }

        //纹路加载函数
        function getTexture(str){//str为纹理url
            var loader = new THREE.TextureLoader();
            return loader.load(str);
        }

    </script>

</body>
</html>
